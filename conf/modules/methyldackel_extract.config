process {
    withName: METHYLDACKEL_EXTRACT {
        ext.args = [
            params.all_contexts ? ' --CHG --CHH' : '',
            params.merge_context ? ' --mergeContext' : '',
            params.ignore_flags ? " --ignoreFlags" : '',
            params.methyl_kit ? " --methylKit" : '',
            params.min_depth > 0 ? " --minDepth ${params.min_depth}" : '',
            params.extra_methyldackel_args ?: ''
        ].join(" ").trim()
        publishDir = [
            [
                path: { "${params.outdir}/methyldackel" },
                mode: params.publish_dir_mode,
                pattern: "*.bedGraph"
            ],
            [
                path: { "${params.outdir}/methyldackel" },
                mode: params.publish_dir_mode,
                pattern: "*.methylKit"
            ]
        ]
    }
}
